<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pretzel HQ — Admin</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="bg-grid"></div>

  <header class="topbar">
    <div class="brand">
      <div class="logo" aria-hidden="true">
        <svg viewBox="0 0 128 128" width="34" height="34" fill="none">
          <path d="M34 46c-6 0-11 5-11 11 0 15 17 18 26 12 6-4 9-12 13-18 3-4 7-7 12-7s9 3 12 7c4 6 7 14 13 18 9 6 26 3 26-12 0-6-5-11-11-11-8 0-13 7-18 12-6 6-12 10-22 10s-16-4-22-10c-5-5-10-12-18-12Z"
                stroke="var(--orange)" stroke-width="8" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M49 78c-8 8-7 22 3 30 7 6 17 7 25 4 8 3 18 2 25-4 10-8 11-22 3-30"
                stroke="var(--blue)" stroke-width="8" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <div>
        <div class="brand-title">Pretzel HQ</div>
        <div class="brand-sub">Admin Panel</div>
      </div>
    </div>
    <nav class="nav">
      <a class="navlink" href="/">Dashboard</a>
      <a class="navlink" href="/admin" id="logoutBtn" style="display:none;">Logout</a>
    </nav>
  </header>

  <main class="wrap">
    <section class="grid" id="loginGate">
      <div class="panel big">
        <div class="panel-head">
          <div>
            <div class="panel-title">Admin Login</div>
            <div class="panel-note">Enter the admin key to unlock controls</div>
          </div>
          <div class="panel-note" id="loginStatus">Locked</div>
        </div>

        <div style="padding:18px 16px; display:grid; gap:12px; max-width:520px;">
          <div>
            <div class="panel-note" style="margin-bottom:6px;">ADMIN_KEY</div>
            <input id="key" type="password" placeholder="Enter ADMIN_KEY"
              style="width:100%; padding:12px; border-radius:14px; border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.22); color:var(--text); outline:none;">
          </div>

          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <button id="loginBtn" class="fbtn" style="padding:12px 14px;">Login</button>
            <button id="clearBtn" class="fbtn" style="padding:12px 14px;">Clear</button>
          </div>

          <div class="panel-note">
            Tip: Set <b>ADMIN_KEY</b> in Netlify → Environment variables.
          </div>
        </div>
      </div>
    </section>

    <section class="grid" id="adminApp" style="display:none;">
      <div class="panel big">
        <div class="panel-head">
          <div>
            <div class="panel-title">Admin Controls</div>
            <div class="panel-note">Roster + status updates</div>
          </div>
          <div class="panel-note" id="adminStatus">Authenticated</div>
        </div>

        <div style="padding:14px 16px; display:grid; gap:12px;">
          <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:flex-end;">
            <button id="load" class="fbtn" style="padding:12px 14px;">Load State</button>
            <button id="seed" class="fbtn" style="padding:12px 14px;">Seed Demo Data</button>
          </div>

          <div class="panel" style="border-radius:16px;">
            <div class="panel-head">
              <div class="panel-title">Teams</div>
              <div class="panel-note">Create / rename / delete</div>
            </div>
            <div style="padding:14px 16px; display:grid; gap:10px;">
              <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                <div>
                  <div class="panel-note" style="margin-bottom:6px;">New Team</div>
                  <input id="newTeamName" placeholder="e.g., Orange Spiral"
                    style="width:100%; padding:12px; border-radius:14px; border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.22); color:var(--text); outline:none;">
                </div>
                <div style="display:flex; align-items:end; gap:10px;">
                  <button id="addTeamBtn" class="fbtn" style="padding:12px 14px;">Create Team</button>
                  <button id="refreshBtn" class="fbtn" style="padding:12px 14px;">Refresh Lists</button>
                </div>
              </div>

              <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                <div>
                  <div class="panel-note" style="margin-bottom:6px;">Select Team</div>
                  <select id="teamSelect"
                    style="width:100%; padding:12px; border-radius:14px; border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.22); color:var(--text); outline:none;"></select>
                </div>
                <div>
                  <div class="panel-note" style="margin-bottom:6px;">Rename Team</div>
                  <input id="renameTeam" placeholder="New team name"
                    style="width:100%; padding:12px; border-radius:14px; border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.22); color:var(--text); outline:none;">
                </div>
              </div>

              <div style="display:flex; gap:10px; flex-wrap:wrap;">
                <button id="renameTeamBtn" class="fbtn" style="padding:12px 14px;">Rename</button>
                <button id="deleteTeamBtn" class="fbtn" style="padding:12px 14px; border-color:rgba(255,77,109,.35); background:rgba(255,77,109,.10); color:var(--text);">Delete Team</button>
              </div>

              <div class="panel-note" id="teamResult">—</div>
            </div>
          </div>

          <div class="panel" style="border-radius:16px;">
            <div class="panel-head">
              <div class="panel-title">Players</div>
              <div class="panel-note">Add / rename / move / remove (max 5 per team)</div>
            </div>
            <div style="padding:14px 16px; display:grid; gap:10px;">
              <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                <div>
                  <div class="panel-note" style="margin-bottom:6px;">New Player</div>
                  <input id="newPlayerName" placeholder="Player name"
                    style="width:100%; padding:12px; border-radius:14px; border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.22); color:var(--text); outline:none;">
                </div>
                <div>
                  <div class="panel-note" style="margin-bottom:6px;">Assign Team</div>
                  <select id="newPlayerTeam"
                    style="width:100%; padding:12px; border-radius:14px; border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.22); color:var(--text); outline:none;"></select>
                </div>
              </div>
              <button id="addPlayerBtn" class="fbtn" style="padding:12px 14px;">Add Player</button>

              <hr style="border:none;border-top:1px solid rgba(255,255,255,.08);width:100%">

              <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                <div>
                  <div class="panel-note" style="margin-bottom:6px;">Select Player</div>
                  <select id="playerSelect"
                    style="width:100%; padding:12px; border-radius:14px; border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.22); color:var(--text); outline:none;"></select>
                </div>
                <div>
                  <div class="panel-note" style="margin-bottom:6px;">Rename Player</div>
                  <input id="renamePlayer" placeholder="New player name"
                    style="width:100%; padding:12px; border-radius:14px; border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.22); color:var(--text); outline:none;">
                </div>
              </div>

              <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                <div>
                  <div class="panel-note" style="margin-bottom:6px;">Move to Team</div>
                  <select id="moveTeam"
                    style="width:100%; padding:12px; border-radius:14px; border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.22); color:var(--text); outline:none;"></select>
                </div>
                <div style="display:flex; align-items:end; gap:10px; flex-wrap:wrap;">
                  <button id="renamePlayerBtn" class="fbtn" style="padding:12px 14px;">Rename</button>
                  <button id="movePlayerBtn" class="fbtn" style="padding:12px 14px;">Move</button>
                  <button id="deletePlayerBtn" class="fbtn" style="padding:12px 14px; border-color:rgba(255,77,109,.35); background:rgba(255,77,109,.10); color:var(--text);">Remove Player</button>
                </div>
              </div>

              <div class="panel-note" id="playerResult">—</div>
            </div>
          </div>

          <div class="panel" style="border-radius:16px;">
            <div class="panel-head">
              <div class="panel-title">Status + Kills</div>
              <div class="panel-note">Update a player</div>
            </div>
            <div style="padding:14px 16px; display:grid; gap:10px;">
              <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                <div>
                  <div class="panel-note" style="margin-bottom:6px;">Status</div>
                  <select id="statusSelect"
                    style="width:100%; padding:12px; border-radius:14px; border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.22); color:var(--text); outline:none;">
                    <option value="alive">Alive</option>
                    <option value="pending">Pending</option>
                    <option value="eliminated">Eliminated</option>
                    <option value="revived">Revived</option>
                  </select>
                </div>
                <div>
                  <div class="panel-note" style="margin-bottom:6px;">Kills (set exact number)</div>
                  <input id="killsSet" type="number" min="0" step="1" placeholder="e.g., 2"
                    style="width:100%; padding:12px; border-radius:14px; border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.22); color:var(--text); outline:none;">
                </div>
              </div>

              <div style="display:flex; gap:10px; flex-wrap:wrap;">
                <button id="addKillBtn" class="fbtn" style="padding:12px 14px;">+1 Kill</button>
                <button id="applyStatusBtn" class="fbtn" style="padding:12px 14px;">Apply Status/Kills</button>
              </div>

              <div>
                <div class="panel-note" style="margin-bottom:6px;">Log message (optional)</div>
                <input id="logMsg" placeholder="e.g., Confirmed: Alex eliminated."
                  style="width:100%; padding:12px; border-radius:14px; border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.22); color:var(--text); outline:none;">
              </div>

              <div class="panel-note" id="statusResult">—</div>
            </div>
          </div>

          <div class="panel" style="border-radius:16px;">
            <div class="panel-head">
              <div class="panel-title">Snapshot</div>
              <div class="panel-note">Debug view</div>
            </div>
            <div style="padding:14px 16px;">
              <pre id="snapshot" style="margin:0; white-space:pre-wrap; color:var(--muted);"></pre>
            </div>
          </div>

        </div>
      </div>
    </section>
  </main>

  <script src="/admin/admin.js"></script>
</body>
</html>
