self.addEventListener("install",()=>self.skipWaiting());self.addEventListener("activate",(e)=>e.waitUntil(self.clients.claim()));self.addEventListener("push",(event)=>{let data={};try{data=event.data ? event.data.json():{};}catch{}const title=data.title || "Pretzel HQ";const options={body:data.message || "Update",data};event.waitUntil(self.registration.showNotification(title,options));});self.addEventListener("notificationclick",(event)=>{event.notification.close();event.waitUntil(clients.openWindow("/"));});